<div class="employee-container">
  <h2>Employees</h2>
  <div class="filter-and-export">
    <div class="search-container">
      <svg class="icon" aria-hidden="true" viewBox="0 0 24 24">
        <g>
          <path d="M21.53 20.47l-3.66-3.66C19.195 15.24 20 13.214 20 11c0-4.97-4.03-9-9-9s-9 4.03-9 9 4.03 9 9 9c2.215 0 4.24-.804 5.808-2.13l3.66 3.66c.147.146.34.22.53.22s.385-.073.53-.22c.295-.293.295-.767.002-1.06zM3.5 11c0-4.135 3.365-7.5 7.5-7.5s7.5 3.365 7.5 7.5-3.365 7.5-7.5 7.5-7.5-3.365-7.5-7.5z"></path>
        </g>
      </svg>
      <input
        type="text"
        placeholder="Search"
        class="filter-input"
        [(ngModel)]="filterValue"
      />
    </div>
    <button class="export-button" (click)="exportToExcel()"> Export
      <img src="../../assets/images/excel.png" alt="Excel" /> 
    </button>
    <button class="delete-button" (click)="openModal()">Delete 
      <img src="../../assets/images/delete.png" alt="Delete" /> 
    </button>
  </div>
  <table>
    <thead>
      <tr>
        <th>
          <div class="select-all-container">
            <input type="checkbox" (change)="selectAll($event)" />
          </div>
        </th>
        <th>
          ID
        </th>
        <th>
          Full Name
        </th>
        <th>
          Sex
        </th>
        <th>
          Address
        </th>
        <th>
          Vaccination Status
        </th>
        <th>
          Company
        </th>
        <th>
          Phone Number
        </th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let employee of filteredEmployees()">
        <td>
          <div class="checkbox-container">
            <input type="checkbox" [(ngModel)]="employee.selected" />
          </div>
        </td>
        <td>{{ employee.id }}</td>
        <td>{{ employee.name }}</td>
        <td>{{ employee.sex }}</td>
        <td>{{ employee.address }}</td>
        <td [class]="employee.vaccinationstatus.toLowerCase()">{{ employee.vaccinationstatus }}</td>
        <td>{{ employee.company }}</td>
        <td>{{ employee.phone }}</td>
      </tr>
    </tbody>
  </table>

  <!-- Modal -->
  <div class="modal" *ngIf="showModal" (click)="closeModal()">
    <div class="modal-content" (click)="stopEventPropagation($event)">
      <h2>Delete Confirmation</h2>
      <p>Are you sure you want to delete the selected employees?</p>
      <div class="modal-buttons">
        <button class="cancel-button" (click)="closeModal()">Cancel 
          <img src="../../assets/images/decline.png" alt="Cancel" /> 
        </button>
        <button class="confirm-button" (click)="deleteSelected()">Confirm 
          <img src="../../assets/images/approve.png" alt="Approve" /> 
        </button>
      </div>
    </div>
  </div>
</div>